hard = {"5" => {"2" => "H", "3" => "H", "4" => "H", "5" => "H", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "6" => {"2" => "H", "3" => "H", "4" => "H", "5" => "H", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "7" => {"2" => "H", "3" => "H", "4" => "H", "5" => "H", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "8" => {"2" => "H", "3" => "H", "4" => "Dh", "5" => "Dh", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "9" => {"2" => "Dh", "3" => "Dh", "4" => "Dh", "5" => "Dh", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "10" => {"2" => "Dh", "3" => "Dh", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "Dh", "8" => "Dh", "9" => "Dh", "10" => "H", "11" => "H"},
        "11" => {"2" => "Dh", "3" => "Dh", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "Dh", "8" => "Dh", "9" => "Dh", "10" => "Dh", "11" => "Dh"},
        "12" => {"2" => "H", "3" => "H", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "13" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "14" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "15" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "16" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "17" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"},
        "18" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"},
        "19" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"},
        "20" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"},
        "21" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"}}

soft = {"13" => {"2" => "H", "3" => "H", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "14" => {"2" => "H", "3" => "H", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "15" => {"2" => "H", "3" => "H", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "16" => {"2" => "H", "3" => "H", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "17" => {"2" => "Dh", "3" => "Dh", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "18" => {"2" => "S", "3" => "Ds", "4" => "Ds", "5" => "Ds", "6" => "Ds", "7" => "S", "8" => "S", "9" => "H", "10" => "H", "11" => "S"},
        "19" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "Ds", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"},
        "20" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"},
        "21" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "S", "8" => "S", "9" => "S", "10" => "S", "11" => "S"}}

pair = {"2" => {"2" => "H", "3" => "H", "4" => "H", "5" => "H", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "3" => {"2" => "H", "3" => "H", "4" => "H", "5" => "H", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "4" => {"2" => "H", "3" => "H", "4" => "H", "5" => "H", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "5" => {"2" => "H", "3" => "H", "4" => "Dh", "5" => "Dh", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "6" => {"2" => "Dh", "3" => "Dh", "4" => "Dh", "5" => "Dh", "6" => "H", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "7" => {"2" => "Dh", "3" => "Dh", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "Dh", "8" => "Dh", "9" => "Dh", "10" => "H", "11" => "H"},
        "8" => {"2" => "Dh", "3" => "Dh", "4" => "Dh", "5" => "Dh", "6" => "Dh", "7" => "Dh", "8" => "Dh", "9" => "Dh", "10" => "Dh", "11" => "Dh"},
        "9" => {"2" => "H", "3" => "H", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "10" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"},
        "11" => {"2" => "S", "3" => "S", "4" => "S", "5" => "S", "6" => "S", "7" => "H", "8" => "H", "9" => "H", "10" => "H", "11" => "H"}}

card1 = ''
card2 = ''
dealer_card = ''

def validate(card)
  # VALIDATE USER ENTRY.
  valid_set = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A']
  valid_set.include?(card)
end

def convert(card)
  # TAKES CURRENT CARD VALUE AND CONVERTS TO NUMBER VALUE AND RETURNS TO NEW VARIABLE AS INTEGER FOR CALCULATIONS.
  if card == 'A'
    card = 11
  elsif card == 'K' || card == 'Q' || card == 'J'
    card = 10
  else
    card = card.to_i
  end
end

def hard_soft_pair(card1, card2, dealer, st, hd, pr)
  # COMPARES CARD VALUES TO DETERMINE WHICH HASH TO REFERENCE AND RETURNS THE VALUE FROM THE HASH.
  if card1 == 11 || card2 == 11
    return st[(card1.to_i+card2.to_i).to_s][dealer.to_s]
  elsif card1 == card2
    return pr[(card1.to_i+card2.to_i).to_s][dealer.to_s]
  else
    return hd[(card1.to_i+card2.to_i).to_s][dealer.to_s]
  end
end

def next_move(choice)
  # TAKES THE HASH VALUE RETURNED FROM hard_soft_pair AND PRINTS THE FINAL EVALUATION FOR THE USER.
  if choice == 'H'
    puts "==============="
    puts "You want to Hit"
    puts "==============="
  elsif choice == 'S'
    puts "================"
    puts "You want to Stay"
    puts "================"
  elsif choice == 'Ds'
    puts "====================================="
    puts "You want to Double if you can or Stay"
    puts "====================================="
  elsif choice == 'Dh'
    puts "===================================="
    puts "You want to Double if you can or Hit"
    puts "===================================="
  else
    puts "================================"
    puts "I'm not sure what you should do."
    puts "================================"
    system('say "I have failed you my master."')
  end
end

# GET INPUT AND SEND FOR VALIDATION.
until validate(card1)
  puts "Please tell me your first card (Use J, Q, K or A for face cards)"
  card1 = gets.chomp.upcase
end

until validate(card2)
  puts "How about your second card? (Use J, Q, K or A for face cards)"
  card2 = gets.chomp.upcase
end

until validate(dealer_card)
  puts "And what's that evil dealer's card? (Use J, Q, K or A for face cards)"
  dealer_card = gets.chomp.upcase
end

# CALLS TO RUN CONVERSIONS, GET HASH VALUE AND REPORT FINAL OUTPUT.
con_card1 = convert(card1)
con_card2 = convert(card2)
con_dealer = convert(dealer_card)
hash_choice = hard_soft_pair(con_card1, con_card2, con_dealer, soft, hard, pair)
next_move(hash_choice)
